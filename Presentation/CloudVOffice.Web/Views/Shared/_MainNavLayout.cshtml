@using Newtonsoft.Json;
@using CloudVOffice.Core.Domain.Pemission;
@using System.Collections.Generic;
@using Microsoft.AspNetCore.Http
<aside class="app-side fixed" id="app-side">
    <!-- BEGIN .side-content -->
    <div class="side-content ">
        <!-- BEGIN .user-actions -->
        <ul class="user-actions">
            <li>
                <a href="#">
                    <i class="icon-event_note"></i>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="icon-rate_review"></i>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="icon-drafts"></i>
                    <span class="count-label red"></span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="icon-assignment_turned_in"></i>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="icon-photo_camera"></i>
                </a>
            </li>
            <li>
                <a href="#" data-toggle="tooltip" data-placement="top" title="Secured">
                    <i class="icon-verified_user"></i>
                </a>
            </li>
        </ul>
        <!-- END .user-actions -->
        <div class="sidebarNavScroll">
            <!-- BEGIN .side-nav -->
            <nav class="side-nav">
                <!-- BEGIN: side-nav-content -->
                <ul class="unifyMenu" id="unifyMenu">
                    @if (User.Identity.IsAuthenticated)
                    {
                        var menu = @User.Claims.FirstOrDefault(x => x.Type == "Menu").Value.ToString();
                        {
                            var newMenu = JsonConvert.DeserializeObject<List<Application>>(menu);
                         
                            for(int k = 0; k < newMenu.Count; k++)
                            {
                                if (newMenu[k].AreaName == @ViewContext.RouteData.Values["area"].ToString())
                                {
                                    var subMenus = newMenu[k].Children;
                                    for (int i = 0; i < subMenus.Count; i++)
                                    {
                                        if (subMenus[i].Children.Count > 0)
                                        {
                                            <li>
                                                <a href="#" class="has-arrow" aria-expanded="false">
                                                    <span class="has-icon">
                                                        <i class="@subMenus[i].IconClass"></i>
                                                    </span>
                                                    <span class="nav-title">@subMenus[i].ApplicationName</span>
                                                </a>
                                                <ul aria-expanded="false">
                                                    @for (int j = 0; j < subMenus[i].Children.Count; j++)
                                                    {
                                                        <li>
                                                            <a href="@subMenus[i].Children[j].Url">@subMenus[i].Children[j].ApplicationName</a>
                                                        </li>

                                                    }
                                                </ul>
                                            </li>
                                        }
                                        else
                                        {
                                            <li>
                                                <a href="@subMenus[i].Url">
                                                    <span class="has-icon">
                                                        <i class="@subMenus[i].IconClass"></i>
                                                    </span>
                                                    <span class="nav-title">@subMenus[i].ApplicationName</span>
                                                </a>
                                            </li>
                                        }



                                    }
                                    break;
                                }
                            }


                        }
                    }
                    




                 


                </ul>
                <!-- END: side-nav-content -->
            </nav>
            <!-- END: .side-nav -->
        </div>
    </div>
    <!-- END: .side-content -->
</aside>