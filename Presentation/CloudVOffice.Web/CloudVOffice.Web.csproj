<Project Sdk="Microsoft.NET.Sdk.Web">

	<PropertyGroup>
		<TargetFramework>net7.0</TargetFramework>
		<Nullable>enable</Nullable>
		<ImplicitUsings>enable</ImplicitUsings>

		<GenerateRuntimeConfigDevFile>true</GenerateRuntimeConfigDevFile>
		<!--Set this parameter to true to get the dlls copied from the NuGet cache to the output of your project-->
		<CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
		<AspNetCoreHostingModel>InProcess</AspNetCoreHostingModel>
		<!--When true, compiles and emits the Razor assembly as part of publishing the project-->
		<RazorCompileOnPublish>false</RazorCompileOnPublish>
	</PropertyGroup>

	<ItemGroup>
		<Folder Include="Areas\Accounts\Controllers\" />
		<Folder Include="Areas\Accounts\Data\" />
		<Folder Include="Areas\Accounts\Models\" />
		<Folder Include="Areas\Accounts\Views\" />
		<Folder Include="Areas\" />
		<Folder Include="Controllers\" />
		<Folder Include="Plugins\" />



	</ItemGroup>

	<ItemGroup>
		<Compile Remove="Plugins\**;Themes\**" />
		<Compile Remove="Plugins\Uploaded\**" />
		<Content Remove="Plugins\**;Themes\**" />
		<Content Remove="Plugins\Uploaded\**" />
		<EmbeddedResource Remove="Plugins\**;Themes\**" />
		<EmbeddedResource Remove="Plugins\Uploaded\**" />
		<None Remove="Plugins\**;Themes\**" />
		<None Remove="Plugins\Uploaded\**" />
		<None Include="Plugins\**" CopyToPublishDirectory="PreserveNewest" Exclude="Plugins\**\runtimes\**;Plugins\**\ref\**;Plugins\**\*.pdb" />

		<Content Include="Themes\**" CopyToPublishDirectory="PreserveNewest" CopyToOutputDirectory="Never" />

		<!-- We copy the \Logs directory -->
		<Content Include="Logs\**" CopyToPublishDirectory="PreserveNewest" />


	</ItemGroup>

	<ItemGroup>
		<!-- This setting fixes the problem caused by this update in the websdk in vs2019
    https://github.com/aspnet/websdk/commit/7e6b193ddcf1eec5c0a88a9748c626775555273e#diff-edf5a48ed0d4aa5a4289cb857bf46a04
    Therefore, we restore the standard configuration behavior (there was no copy to the output directory) 
    in order to avoid the "Duplicate dll" error during publication. 
    We can also use “ExcludeConfigFilesFromBuildOutput” according to https://github.com/aspnet/AspNetCore/issues/14017 -->
		<Content Update="**\*.config;**\*.json" CopyToOutputDirectory="Never" CopyToPublishDirectory="PreserveNewest" />
	</ItemGroup>
	<ItemGroup>
		<PackageReference Include="Microsoft.VisualStudio.Web.CodeGeneration.Design" Version="7.0.5" />
	</ItemGroup>

	<ItemGroup>
		<ProjectReference Include="..\..\CloudVOffice.Web.Framework\CloudVOffice.Web.Framework.csproj" />
	</ItemGroup>

</Project>
